<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"/><meta name="viewport" content="width=device-width, initial-scale=0.8"/><title>Capture the Flag!</title><link rel="stylesheet" type="text/css" href="scribble.css" title="default"/><link rel="stylesheet" type="text/css" href="racket.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-style.css" title="default"/><link rel="stylesheet" type="text/css" href="manual-racket.css" title="default"/><script type="text/javascript" src="scribble-common.js"></script><script type="text/javascript" src="manual-racket.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="scribble-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist tocviewlisttopspace"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="" class="tocviewselflink" data-pltdoc="x">Capture the Flag!</a></td></tr></table></div><div class="tocviewsublistonly" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="#%28part._.Where_to_work%29" class="tocviewlink" data-pltdoc="x">Where to work</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="#%28part._.Common_commands%29" class="tocviewlink" data-pltdoc="x">Common commands</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="#%28part._.Defense_bot%29" class="tocviewlink" data-pltdoc="x">Defense bot</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="#%28part._.Offense_bot%29" class="tocviewlink" data-pltdoc="x">Offense bot</a></td></tr></table></div></div></div><div class="tocsub"><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber"></span><a href="#%28part._.Capture_the_.Flag_%29" class="tocsubseclink" data-pltdoc="x">Capture the Flag!</a></td></tr><tr><td><span class="tocsublinknumber">1<tt>&nbsp;</tt></span><a href="#%28part._.Where_to_work%29" class="tocsubseclink" data-pltdoc="x">Where to work</a></td></tr><tr><td><span class="tocsublinknumber">2<tt>&nbsp;</tt></span><a href="#%28part._.Common_commands%29" class="tocsubseclink" data-pltdoc="x">Common commands</a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._set-motors%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">set-<wbr></wbr>motors</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._get-motor-left%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>motor-<wbr></wbr>left</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._get-motor-right%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>motor-<wbr></wbr>right</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._angle-to-opp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">angle-<wbr></wbr>to-<wbr></wbr>opp</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._dist-to-opp%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">dist-<wbr></wbr>to-<wbr></wbr>opp</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._angle-to-flag%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">angle-<wbr></wbr>to-<wbr></wbr>flag</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._distance-to-flag%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">distance-<wbr></wbr>to-<wbr></wbr>flag</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._get-robot-angle%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>robot-<wbr></wbr>angle</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._get-opp-angle%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">get-<wbr></wbr>opp-<wbr></wbr>angle</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._looking-dist%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">looking-<wbr></wbr>dist</span></a></td></tr><tr><td><span class="tocsublinknumber">3<tt>&nbsp;</tt></span><a href="#%28part._.Defense_bot%29" class="tocsubseclink" data-pltdoc="x">Defense bot</a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._shoot-laser%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">shoot-<wbr></wbr>laser</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._laser-cooldown-left%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">laser-<wbr></wbr>cooldown-<wbr></wbr>left</span></a></td></tr><tr><td><a href="#%28def._%28%28lib._ctf%2Fmain..rkt%29._opp-just-boosted~3f%29%29" class="tocsubnonseclink" data-pltdoc="x"><span class="RktSym">opp-<wbr></wbr>just-<wbr></wbr>boosted?</span></a></td></tr><tr><td><span class="tocsublinknumber">4<tt>&nbsp;</tt></span><a href="#%28part._.Offense_bot%29" class="tocsubseclink" data-pltdoc="x">Offense bot</a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="versionbox"><span class="versionNoNav">8.1</span></div><h2><a name="(part._.Capture_the_.Flag_)"></a>Capture the Flag!</h2><p><table cellspacing="0" cellpadding="0" class="defmodule"><tr><td align="left" colspan="2"><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><span class="badlink"><span class="RktValLink">require</span></span></span><span class="stt"> </span><font class="badlink"><span class="RktModLink"><span class="RktSym">ctf</span></span></font><span class="RktPn">)</span></td></tr></table></p><p>Welcome to a new Virtual Robotics competition! This year&rsquo;s competition
is a step up in the complexity of the tasks, but writing bots should
still be easy for beginners.</p><p>Everyone is going to work in teams of two, and those teams need to
make two different robots together:</p><ul><li><p>An <span style="font-weight: bold">offense bot</span>, whose goal is to capture the flag, and bring it
back to its home base.</p></li><li><p>A <span style="font-weight: bold">defense bot</span> whose goal is to stop the offense bot from
getting the flag.</p></li></ul><p>The defense bot has two ways of interfering with the offense bot: it
can get in the other bot&rsquo;s way, and it can fire (strangely
slow-moving) lasers at it.</p><h3>1<tt>&nbsp;</tt><a name="(part._.Where_to_work)"></a>Where to work</h3><p>Each kind of robot (defense or offense) has its own library of
commands.  If you look in the <span class="RktSym">manias/ctf</span> directory, you should find
three files, with starting templates and some very basic bots to build
off of.</p><ul><li><p><span class="RktSym">offense.rkt</span> is for writing your offense bot.</p></li><li><p><span class="RktSym">defense.rkt</span> is for writing your defense bot.</p></li><li><p><span class="RktSym">together.rkt</span> brings them both together. This is where
you click "run" to start the game.</p></li></ul><p>Here&rsquo;s an overview of the commands you have at your disposal for
controlling your bot.  Some of the commands work for both bots, and
some are only available for offense or defense.</p><h3>2<tt>&nbsp;</tt><a name="(part._.Common_commands)"></a>Common commands</h3><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._set-motors))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">set-motors</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">left</span><span class="hspace">&nbsp;</span><span class="RktVar">right</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">nothing?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">left</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">right</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">number?</span></td></tr></table></blockquote></div><div class="SIntrapara">The left and right motors on your car determine the force on that side
of the car.  The power to each motor ranges from -1 (maximum push in
the reverse direction) to 1 (maximum push forward).</div></p><p>Numbers beyond the range from -1 to 1 have no extra effect, so
<span class="RktPn">(</span><span class="RktSym">set-motors</span><span class="stt"> </span><span class="RktVal"><span class="nobreak">-1</span>0</span><span class="stt"> </span><span class="RktVal">5</span><span class="RktPn">)</span> does the same thing as <span class="RktPn">(</span><span class="RktSym">set-motors</span><span class="stt"> </span><span class="RktVal"><span class="nobreak">-1</span></span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span>.</p><p>Some examples.</p><ul><li><p><span class="RktPn">(</span><span class="RktSym">set-motors</span><span class="stt"> </span><span class="RktVal"><span class="nobreak">-1</span></span><span class="stt"> </span><span class="RktVal">1</span><span class="RktPn">)</span> will cause your car to turn left, without
accelerating forward or backwards</p></li><li><p><span class="RktPn">(</span><span class="RktSym">set-motors</span><span class="stt"> </span><span class="RktVal">1</span><span class="stt"> </span><span class="RktVal">0.5</span><span class="RktPn">)</span> will cause your car to circle forward and to
the right.</p></li></ul><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._get-motor-left))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">get-motor-left</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">number?</span></p></blockquote></td></tr></table></blockquote><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._get-motor-right))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">get-motor-right</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">number?</span></p></blockquote></td></tr></table></blockquote><p>These calls allow you to read off the state of your motors.  So, if in
a previous round you called <span class="RktPn">(</span><span class="RktSym">set-motors</span><span class="stt"> </span><span class="RktVal">0.3</span><span class="stt"> </span><span class="RktVal">0.6</span><span class="RktPn">)</span>, then
<span class="RktPn">(</span><span class="RktSym">get-motor-let</span><span class="RktPn">)</span> will return 0.3, and
<span class="RktPn">(</span><span class="RktSym">get-motor-right</span><span class="RktPn">)</span> will return 0.6</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._angle-to-opp))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">angle-to-opp</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">number?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the angle to the opponent, relative to the bot&rsquo;s current
direction.  <span class="RktPn">(</span><span class="RktSym">angle-to-opp</span><span class="RktPn">)</span> returns i0 if the opponent is
directly in front of the bot, a positive angle if it&rsquo;s to your left,
and a negative angle if it&rsquo;s to your right.</div></p><p>Whether the value is returned in radians or degrees depends on the
mode you&rsquo;re running in.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._dist-to-opp))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">dist-to-opp</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">distance?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Returns the distance to the opponent.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._angle-to-flag))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">angle-to-flag</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">angle?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym">angle-to-opp</span>, except for the flag.
Note that it still works when the flag has been picked up by your
opponent!</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._distance-to-flag))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">distance-to-flag</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">distance?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym">distance-to-opp</span>, except for the flag instead of the
opponent.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._get-robot-angle))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">get-robot-angle</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">angle?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This returns the absolute angle of your angle.  i.e., 0 degrees means
you&rsquo;re pointed to the left, 90 degrees is straight up, 180 degrees is
to the left, and so on.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._get-opp-angle))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">get-opp-angle</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">angle?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Like <span class="RktSym">get-robot-angle</span>, but for your opponent!</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._looking-dist))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">looking-dist</span></span></span><span class="hspace">&nbsp;</span><span class="RktVar">theta</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">distance?</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">theta</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym">angle?</span></td></tr></table></blockquote></div><div class="SIntrapara">tells you how much distance there is to the next obstacle, be it a
wall, a robot or a laser.</div></p><h3>3<tt>&nbsp;</tt><a name="(part._.Defense_bot)"></a>Defense bot</h3><p>These calls are only for the defense bot, and you should only use them
in <span class="RktSym">defense.rkt</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._shoot-laser))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">shoot-laser</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">nothing?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktPn">(</span><span class="RktSym">shoot-laser</span><span class="RktPn">)</span> fires a bullet in the direction your car is
pointed.  But you can&rsquo;t do it too often! Note that you can&rsquo;t always
shoot a laser. That&rsquo;s what the next command is for.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._laser-cooldown-left))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">laser-cooldown-left</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">nothing?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara"><span class="RktPn">(</span><span class="RktSym">laser-cooldown-left</span><span class="RktPn">)</span> tells you how many ticks need to elapse
until you can fire your laser again.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" cellpadding="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._ctf/main..rkt)._opp-just-boosted~3f))"></a><span title="Provided from: ctf"><span class="RktSym"><span class="RktSymDef RktSym">opp-just-boosted?</span></span></span><span class="RktPn"></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">bool?</span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">This lets you tell if your opponent has just called <span class="RktPn">(</span><span class="RktSym">boost</span><span class="RktPn">)</span>!
See the offense bot section above to see what boost does!</div></p><h3>4<tt>&nbsp;</tt><a name="(part._.Offense_bot)"></a>Offense bot</h3><p>THIS SECTION IS UNFINISHED</p><p>- boost
- opponent-angle
- opponent-distance
- opponent-shot?
- flag-angle</p></div></div><div id="contextindicator">&nbsp;</div></body></html>